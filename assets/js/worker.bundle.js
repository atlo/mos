!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}({2:function(e,t){self.addEventListener("message",function(e){const{media:t,owners:r,interests:o}=e.data;let i=e.data.connections,n=e.data.operators;const s=Object.entries(n[0].data).map(([e])=>parseInt(e,10));let a={};i=i.map(e=>Object.assign(e,e.data)),n=n.map(e=>Object.assign(e,e.data)),s.forEach(e=>{a[e]=n.reduce((t,r)=>(t.netto_profit=((r[e]||{}).netto_profit||0)>t.netto_profit?(r[e]||{}).netto_profit||0:t.netto_profit,t.taxed_profit=((r[e]||{}).taxed_profit||0)>t.taxed_profit?(r[e]||{}).taxed_profit||0:t.taxed_profit,t.operating_profit=((r[e]||{}).operating_profit||0)>t.operating_profit?(r[e]||{}).operating_profit||0:t.operating_profit,t),{netto_profit:0,taxed_profit:0,operating_profit:0})});const p=s.reduce((e,s)=>(e[s]={nodes:[...r.filter(e=>i.some(t=>(t[s]||{}).ownerIds&&t[s].ownerIds.some(t=>parseInt(t)===e._id))).map(e=>Object.assign(e,{size:5})),...t.filter(e=>i.some(t=>(t[s]||{}).mediaIds&&t[s].mediaIds.some(t=>parseInt(t)===e._id))).map(e=>Object.assign(e,{size:5,large:!0})),...n.filter(e=>i.some(t=>t[s]&&t._id===e._id)).map(e=>Object.assign(e,{size:20*Math.max(e[s].netto_profit/a[s].netto_profit,0)+5})),...o.filter(e=>n.some(t=>{const r=i.some(e=>e[s]&&e._id===t._id),o=((t[s]||{}).interests||[]).some(t=>t===e.Id);return r&&o})).map(e=>Object.assign(e,{size:5,dashed:!0,type:"érdekeltség",name:e.Name,_id:e.Id}))],links:[]},e),{});s.forEach(e=>{n.filter(t=>i.some(r=>r[e]&&r._id===t._id)).forEach(t=>{if(t[e]){t[e].interests.forEach(r=>{p[e].links.push({source:t._id,target:r})})}}),i.forEach(t=>{if(t[e]){const r=t._id,o=(t[e].mediaIds||[]).filter((e,t,r)=>r.indexOf(e)==t),i=(t[e].ownerIds||[]).filter((e,t,r)=>r.indexOf(e)==t);o&&o.forEach(t=>{p[e].nodes.some(e=>e._id===parseInt(t))&&p[e].links.push({source:r,target:parseInt(t)})}),i&&i.forEach(t=>{p[e].nodes.some(e=>e._id===parseInt(t))&&p[e].links.push({source:r,target:parseInt(t)})})}})}),self.postMessage({max_profits:a,data:p})})}});